[Unit]
Description=Podman syncthing.service
Wants=network-online.target
After=network-online.target

[Service]
Restart=on-failure
TimeoutStartSec=900

[Container]
Image=docker.io/syncthing/syncthing:latest
AutoUpdate=registry
PublishPort=127.0.0.1:8384:8384
PublishPort=22000:22000/tcp
PublishPort=22000:22000/udp
PublishPort=21027:21027/udp
UserNS=keep-id:uid=60139,gid=60139
Volume=%h/.config/syncthing:/var/syncthing/config:Z

# Folders to share
{{- range $paths := index .container_data.docker.syncthing_client.instance_1.paths }}
Volume={{ . }}:Z
{{- end }}

[Install]
WantedBy=default.target
